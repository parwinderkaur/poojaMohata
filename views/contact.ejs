<!--Breadcrumb start-->
<div class="ast_pagetitle">
  <div class="ast_img_overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="page_title">
          <h2>Contact Us</h2>
        </div>
      </div>
      <div class="col-lg-12">
        <ul class="breadcrumb">
          <li><a href="/">Home</a></li>
          <li>//</li>
          <li>Contact Us</li>
        </ul>
      </div>
    </div>
  </div>
</div>
<!--Breadcrumb end-->

<!-- Contact Info -->
<div class="ast_contact_wrapper ast_toppadder70 ast_bottompadder50">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="ast_heading">
          <h1>Get in <span>Touch</span></h1>
          <p>Weâ€™d love to hear from you! Reach us using the details below or send us a message.</p>
        </div>
      </div>
      <div class="col-lg-4 col-md-4 col-sm-4">
        <div class="ast_contact_info">
          <span><i class="fa fa-phone"></i></span>
          <h4>Phone</h4>
          <p><%= settings.number %></p>
        </div>
      </div>
      <div class="col-lg-4 col-md-4 col-sm-4">
        <div class="ast_contact_info">
          <span><i class="fa fa-envelope-open-o"></i></span>
          <h4>Email</h4>
          <p><%= settings.email %></p>
        </div>
      </div>
      <div class="col-lg-4 col-md-4 col-sm-4">
        <div class="ast_contact_info">
          <span><i class="fa fa-map-marker"></i></span>
          <h4>Address</h4>
          <p><%= settings.address %></p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Contact Form -->
<div class="ast_mapnform_wrapper ast_toppadder70">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="ast_heading">
          <h1>Find & <span>Message</span> Here</h1>
        </div>
      </div>
    </div>
  </div>
  <div class="ast_contact_map">
    <div class="ast_contact_form">
      <form id="contactForm">
        <div class="row">
          <div class="col-lg-6">
            <label>Name</label>
            <input type="text" name="name" required>
          </div>
          <div class="col-lg-6">
            <label>Phone</label>
            <input type="text" name="phone" required>
          </div>
          <div class="col-lg-6">
            <label>Email</label>
            <input type="email" name="email" required>
          </div>
          <div class="col-lg-12">
            <label>Message</label>
            <textarea rows="5" name="message" required></textarea>
          </div>
          <div class="col-lg-12">
            <button type="submit" class="ast_btn pull-right">Send</button>
          </div>
        </div>
      </form>
      <div id="formResponse" style="margin-top:10px;"></div>
    </div>
	
	<!-- WhatsApp Direct Contact -->
	<div style="text-align:center; margin:30px 0;">
		<h4>Or <br>Chat with us directly</h4>
		<a href="<%= settings.whatsappLink %>" target="_blank" class="ast_btn">
			<i class="fa fa-whatsapp"></i> WhatsApp Now
		</a>
	</div>
    <!-- Map -->
    <div class="ast_contact_map2">
		<iframe 
			src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d15066.299683774514!2d72.97537758112148!3d19.25734891896984!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3be7bbf2c465948f%3A0xc7f8b5e5d69854f1!2sHiranandani%20Estate%2C%20Thane%20West%2C%20Thane%2C%20Maharashtra!5e0!3m2!1sen!2sin!4v1756879458790!5m2!1sen!2sin" 
			width="100%" 
			height="450" 
			style="border:0;" 
			allowfullscreen 
			loading="lazy" 
			referrerpolicy="no-referrer-when-downgrade">
		</iframe>
	</div>
  </div>
</div>

<script>
document.getElementById("contactForm").addEventListener("submit", async function(e) {
  e.preventDefault();
  
  const name = this.name.value.trim();
  const phone = this.phone.value.trim();
  const email = this.email.value.trim();
  const message = this.message.value.trim();

  // Basic Validation
  if (!name) return alert("Please enter your name");
  if (!phone || !/^[0-9]{10}$/.test(phone)) return alert("Please enter a valid 10-digit phone number");
  if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) return alert("Please enter a valid email address");
  if (!message) return alert("Please enter your message");

  // Submit Data
  const data = { name, phone, email, message };
  try {
    const res = await fetch("/api/contact", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });
    const result = await res.json();

    if (result.success) {
      alert(result.message);
      this.reset();
    } else {
      alert(result.message);
    }
  } catch (err) {
    alert("Something went wrong!");
  }
});
</script>
